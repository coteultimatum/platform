COTE: ULTIMATUM - Website Session Notes
=======================================

Last Updated: 2026-01-17

================================================================================
PROJECT OVERVIEW
================================================================================

A phone-style interface website for the COTE: ULTIMATUM roleplay community.
Live at: https://coteultimatum.github.io/platform/

Features:
- Boot screen with COTE: ULTIMATUM branding + glitch effect
- Lock screen with time/date and aurora background
- Home screen with app dock and rotating quotes
- OAA App: Student database with class cards, profiles, stats, comparison
- Events App: Special exam tracking (Current/Upcoming/History)
- Firebase Realtime Database integration (optional)
- Class points change indicators (up/down arrows)
- Admin panel for moderators

Tech: Vanilla HTML/CSS/JS, Firebase Realtime Database, hosted on GitHub Pages

================================================================================
COMPLETED THIS SESSION (2026-01-17)
================================================================================

1. ADMIN APP UI POLISH

   Loading States:
   - Login shows "Verifying..." for 800ms minimum (prevents flash)
   - Save shows "Saving..." for 600ms minimum with shimmer animation
   - Both run actual operation in parallel with delay

   Sounds (consistent with OAA):
   - All buttons have hover sounds
   - Input focus plays 'select' sound
   - Typing in credentials/points plays 'type' sound
   - Success/error plays appropriate sound
   - Reset plays 'back' sound

   Animations:
   - Login view fades in with scale effect
   - Panel view slides in from below
   - Panel sections stagger in (0.05s, 0.1s, 0.15s delays)
   - Status messages: success pops in, error shakes
   - Login error shakes and re-triggers on new error

   Icon Changes:
   - Home screen: Shield with checkmark (was broken lock)
   - Login screen: Proper padlock with U-shaped shackle (was weird key)
   - Login icon glitches on hover (matches lock screen style)

   Text Changes:
   - "Faculty Login" → "Authentication"
   - "Sign In" → "Log in"

2. SAVE CONFIRMATION MODAL

   - Shows "Confirm Changes" with list of pending changes
   - Changes color-coded: green for increases, red for decreases
   - Cancel/Save buttons with hover sounds
   - Click outside overlay to dismiss
   - Prevents accidental saves

3. CHANGELOG IMPROVEMENTS

   - Entries colored by change direction:
     - Green (#22c55e) for point increases (+)
     - Red (#ef4444) for point decreases (-)

4. SUCCESS FEEDBACK

   - Checkmark icon (✓) in green circle pops in on save success
   - Bouncy animation: scale 0 → 1.2 → 1
   - Appears alongside "Saved X change(s)" text

5. NUMBER FORMATTING

   - Point inputs show commas when not focused (1,000 vs 1000)
   - Commas removed on focus for editing
   - Re-formatted on blur
   - Works with loadAdminPointsFromDB and getAdminPointsFromInputs

6. DELTA DISPLAY FIX

   - Removed +/- signs from delta indicators
   - Now just shows arrow + number (▲50 or ▼30)
   - Arrow direction indicates increase/decrease

7. OAA CLASS ORDER

   - Classes now sorted by rank (1st→4th by points)
   - No longer fixed ABCD order
   - Updates when points change

8. BOOT GLITCH FIX

   - Only COTE: logo glitches (not individual letters)
   - Uses same glitchEffect animation as lock screen hover
   - Triggers twice at 0.9s after boot starts
   - Removed separate letter glitch animations

9. CODE CLEANUP

   - Removed unused @keyframes glitch animation (52 lines)
   - Consolidated duplicate shake animations (loginErrorShake → statusShake)
   - Deleted deprecated standalone admin.html (admin is in main app now)

================================================================================
COMPLETED SESSION 2 (2026-01-13) - DATABASE INTEGRATION
================================================================================

1. UI CONSISTENCY & POLISH

   Branding:
   - Fixed "COTE:" with colon everywhere (boot, lock, home, apps)
   - Unified brand size (1.2rem/0.7rem) across all screens
   - Centered COTE: ULTIMATUM title using flex:1 layout
   - Added glitch effect to all COTE titles on hover
   - Boot sequence now has brief glitch animation mid-loading

   Class Colors (NEW palette):
   - A: #fecdd3 (light pink)
   - B: #fda4af (medium pink)
   - C: #e11d48 (rose red)
   - D: #881337 (dark crimson)
   - Applied to class cards, hover effects, profile pictures, comparison avatars

   Sort Buttons:
   - Renamed "Overall" to "Overall Grade"
   - Colored by stat type (academic=purple, intelligence=yellow,
     decision=orange, physical=green, cooperativeness=blue, overall=red)

   Overall Grade:
   - Unified red color (#e74c3c) across profile, comparison, sort button
   - Matches "High Stakes" exam tag color

   Comparison Modal:
   - Best stat values colored by stat type
   - Avatar glows match student's class color
   - Close button has hover sound
   - Closes on back/home navigation

   Profile View:
   - Added 2rem top margin to avoid header overlap
   - Profile picture has class-colored glow/border

   Other Fixes:
   - Time consistently on right (home and apps)
   - Favorites filter hover is cyan (not gray)
   - Favorites empty state shows "No favorites in this class"
   - Exam Types arrow: right when collapsed, down when expanded
   - Compare buttons have sounds
   - Keyboard hints clickable with touch support

2. DISCORD EMBED

   - Using GRVN8MNQY-backdrop_wide.png as preview image
   - Simplified meta tags (removed redundant site_name)
   - Fixed theme-color to #050a12 (matches dark background)
   - Embed shows: "COTE: ULTIMATUM" + description + backdrop image

3. MOBILE

   - Fixed theme-color causing cyan edges on mobile browsers
   - Touch support for keyboard hints and lock screen

================================================================================
COMPLETED SESSION 2 (2026-01-13) - DATABASE INTEGRATION
================================================================================

1. FIREBASE REALTIME DATABASE INTEGRATION

   New Files Created:
   - database.js: Firebase connection module with real-time sync
   - admin.html: Admin panel for moderators (requires setup)

   database.js Features:
   - Firebase SDK initialization with config placeholders
   - Real-time subscription to classPoints data
   - Delta calculation (compares current to previous values)
   - Connection status monitoring (connected/disconnected)
   - Admin authentication framework (Discord OAuth ready)
   - COTEDB global object with public API

   index.html Updates:
   - Added Firebase SDK scripts (firebase-app, firebase-database, firebase-auth)
   - Loads database.js before script.js

2. CLASS POINTS CHANGE INDICATORS

   Visual Features:
   - Green up arrow (▲) with +N for point increases
   - Red down arrow (▼) with -N for point decreases
   - Animated appearance (scale + fade in)
   - Shown next to CP value on class cards

   CSS Added (styles.css):
   - .points-delta: Base indicator styling
   - .points-delta.positive: Green with background
   - .points-delta.negative: Red with background
   - .delta-arrow: Arrow icon using ::before pseudo-element
   - @keyframes deltaAppear: Entrance animation

   Storage:
   - Previous points stored in localStorage ('cote-previous-points')
   - Delta calculated on page load and when real-time updates arrive
   - Points saved on page unload for next session comparison

3. DATABASE STATUS INDICATOR

   - Fixed bottom-left indicator showing connection status
   - States: "Live" (green), "Local Data" (yellow), "Offline" (red)
   - Animated status dot with glow effect

4. SCRIPT.JS UPDATES

   New State Properties:
   - dbConnected: Boolean for connection status
   - dbClassPoints: Data from Firebase (overrides local)
   - previousPoints: Stored previous values for delta
   - pointDeltas: Calculated differences

   New Functions:
   - initDatabase(): Initialize Firebase connection
   - handleDatabaseEvent(): Process real-time events
   - handleClassPointsUpdate(): Update UI on data change
   - getActiveClassPoints(): Returns Firebase or local data
   - getPointDelta(): Calculate change for specific class
   - createDbStatusIndicator(): Create status UI element
   - updateDbStatus(): Update status indicator

   Updated Functions:
   - createClassCard(): Now shows delta indicators
   - getClassRank(): Uses getActiveClassPoints()

5. ADMIN PANEL (admin.html)

   Features:
   - Discord-themed login button (OAuth placeholder)
   - Class points input grid (all 3 years, all 4 classes)
   - Class badge indicators with correct colors
   - Save/Reset buttons
   - Status messages (success/error)
   - User info display when authenticated

   Note: Full Discord OAuth requires:
   - Discord Developer Application
   - Backend server (Firebase Functions)
   - Firebase Custom Auth tokens
   - Admin user ID list in Firebase

================================================================================
NEXT SESSION - PLANNED FEATURES
================================================================================

1. OC CREATOR APP (New Feature)

   Purpose: Allow users to create Original Characters and export for Discord submission

   UI Flow Options (to decide):
   - Multi-step wizard (guided, one section at a time)
   - Single page form (all fields visible)
   - Live card builder (preview updates as you type) ← recommended

   Fields to Collect:
   - Name, Year (1/2/3), Class preference (A/B/C/D)
   - 5 OAA stats (Academic, Intelligence, Decision, Physical, Cooperativeness)
   - Profile image (URL or upload?)
   - Short bio
   - Optional: personality traits, backstory, goals

   Open Questions:
   - Free stat selection or point budget system?
   - Image upload vs URL paste?
   - PDF style: simple text or styled ANHS form?
   - Save progress locally?

   Export:
   - PDF for Discord forum submission
   - PNG student card for sharing (optional)

2. FIREBASE SETUP (User Action Required)
   - Create Firebase project at console.firebase.google.com
   - Enable Realtime Database
   - Copy config to database.js FIREBASE_CONFIG
   - Set database rules for security
   - Initialize classPoints data structure

2. DISCORD OAUTH (Optional)
   - Create Discord Application
   - Set up Firebase Functions for OAuth flow
   - Implement custom token generation
   - Add admin user IDs to Firebase

3. POTENTIAL ENHANCEMENTS
   - Student data migration to Firebase
   - Real-time student profile updates
   - Event/exam data in database
   - Push notifications for updates

================================================================================
CURRENT STATE
================================================================================

Visual Features:
- Custom cyan cursor globally
- Aurora background effects with blur
- Scan lines + noise texture overlays
- Glitch effect on COTE titles (hover + boot sequence)
- Staggered card entrance animations
- Animated border glow on app dock
- Class-colored profile picture borders
- Stat-colored comparison highlights
- Class points delta indicators (arrows only, no +/-)
- OAA classes sorted by rank (not fixed ABCD)

Functional Features:
- Rotating lore-accurate quotes (8 quotes from LN/anime)
- Class points display with ranking (1st-4th)
- Overall OAA grade on student cards
- Search with keyboard shortcut (/)
- Keyboard navigation (ESC back, 1/2/3 for apps, ENTER to unlock)
- Student comparison (up to 4 students)
- Favorites system (stored in localStorage)
- Time display in all headers
- Collapsible Exam Types section
- Firebase Realtime Database integration (optional)
- Real-time class points updates (when Firebase configured)

Admin Panel Features:
- Simple username/password authentication
- Class points editing with number formatting (commas)
- Save confirmation modal with change preview
- Changelog with color-coded entries (green +, red -)
- Success checkmark animation on save
- Full sound integration (hover, type, select, success, error)
- Consistent animations with main app

Student Data (students.js):
- 13 students across 4 classes (A: 4, B: 3, C: 3, D: 3)
- Lore-accurate ID format: S01TXXXXXX (e.g., S01T004801)
- Class points all set to 1000 (to be updated as RP progresses)

Database Integration:
- Firebase Realtime Database configured (cote-ultimatum project)
- Falls back to local data if Firebase unavailable
- Stores previous points for delta calculation
- Admin panel integrated into main app (key "3")

================================================================================
FILES STRUCTURE
================================================================================

/website/
  index.html                    - Main HTML structure
  styles.css                    - All styling (~3900 lines)
  script.js                     - All interactivity (~2000 lines)
  students.js                   - Student data and class points (local fallback)
  database.js                   - Firebase database module (~200 lines)
  firebase-init.json            - Initial database structure reference
  GRVN8MNQY-backdrop_wide.png   - Discord embed image
  SESSION_NOTES.txt             - This file

================================================================================
STYLE REFERENCE
================================================================================

Class Colors (NEW):
- A: #fecdd3 (light pink)
- B: #fda4af (medium pink)
- C: #e11d48 (rose red)
- D: #881337 (dark crimson)

Stat Colors:
- Academic: #9b59b6 (purple)
- Intelligence: #f1c40f (yellow)
- Decision: #e67e22 (orange)
- Physical: #2ecc71 (green)
- Cooperativeness: #3498db (blue)
- Overall/High Stakes: #e74c3c (red)

Site Colors:
- Background: #050a12 (dark navy)
- Accent: #4dc9e6 (cyan)
- Crimson: #9a2e48

Fonts:
- Orbitron (titles, tech elements)
- Inter (body text)

================================================================================
HOW TO ADD STUDENTS
================================================================================

In students.js, add entry to studentData array:

{
    name: "Student Name",
    year: 1,                    // 1, 2, or 3
    class: "A",                 // A, B, C, or D
    id: "S01T004805",          // S + year(01/02/03) + T + 6-digit number
    image: "",                  // Discord/Imgur URL or leave empty
    stats: {
        academic: 50,           // 0-100
        intelligence: 50,
        decision: 50,
        physical: 50,
        cooperativeness: 50
    }
}

ID Format: S[year]T[6-digit number]
- Year 1: S01TXXXXXX (current range: 004801-004863)
- Year 2: S02TXXXXXX
- Year 3: S03TXXXXXX

================================================================================
HOW TO UPDATE CLASS POINTS
================================================================================

Option 1: Local (students.js) - Simple, no database needed

In students.js, modify classPoints object:

const classPoints = {
    1: { A: 1000, B: 950, C: 900, D: 850 },  // 1st Year
    2: { A: 1000, B: 1000, C: 1000, D: 1000 },
    3: { A: 1000, B: 1000, C: 1000, D: 1000 }
};

Rankings auto-calculate based on points.

Option 2: Firebase (Real-time) - For live updates

Use Firebase Console or admin panel to update classPoints in database.
Changes sync instantly to all connected users.

================================================================================
HOW TO SET UP FIREBASE (Optional)
================================================================================

1. Create Firebase Project:
   - Go to https://console.firebase.google.com/
   - Click "Add project"
   - Name it (e.g., "cote-ultimatum")
   - Disable Google Analytics (optional)

2. Add Web App:
   - Click gear icon → Project settings
   - Scroll to "Your apps" → Click web icon (</>)
   - Register app (e.g., "COTE Platform")
   - Copy the firebaseConfig object

3. Enable Realtime Database:
   - Click "Build" → "Realtime Database"
   - Click "Create Database"
   - Choose region closest to you
   - Start in "test mode" (we'll secure it later)

4. Configure database.js:
   - Open website/database.js
   - Replace FIREBASE_CONFIG with your config:

   const FIREBASE_CONFIG = {
       apiKey: "YOUR_API_KEY",
       authDomain: "YOUR_PROJECT.firebaseapp.com",
       databaseURL: "https://YOUR_PROJECT-default-rtdb.firebaseio.com",
       projectId: "YOUR_PROJECT",
       storageBucket: "YOUR_PROJECT.appspot.com",
       messagingSenderId: "YOUR_SENDER_ID",
       appId: "YOUR_APP_ID"
   };

5. Initialize Database Structure:
   - In Firebase Console, go to Realtime Database
   - Click on your database URL
   - Click "+" to add data, create this structure:

   classPoints
     1
       A: 1000
       B: 1000
       C: 1000
       D: 1000
     2
       A: 1000
       B: 1000
       C: 1000
       D: 1000
     3
       A: 1000
       B: 1000
       C: 1000
       D: 1000

6. Set Security Rules (Important!):
   - Go to Realtime Database → Rules tab
   - For testing, use:

   {
     "rules": {
       ".read": true,
       ".write": false,
       "classPoints": {
         ".write": "auth != null && root.child('admins').child(auth.uid).val() == true"
       }
     }
   }

   This allows everyone to read, but only admins can write.

7. Add Admin Users:
   - In Firebase Console, add an "admins" node:

   admins
     DISCORD_USER_ID_1: true
     DISCORD_USER_ID_2: true

   (Replace with actual Discord user IDs after setting up OAuth)

================================================================================
QUOTES (Lore-Accurate)
================================================================================

1. "All people are nothing but tools. In this world, winning is everything."
   - Kiyotaka Ayanokoji

2. "I've never once thought of you as an ally. Not you. Not Kushida. Not Hirata."
   - Kiyotaka Ayanokoji

3. "Class D is an assemblage of defective products."
   - Sae Chabashira

4. "Violence is the most powerful weapon. True strength means the power to use it."
   - Kakeru Ryuen

5. "Smiling means letting your guard down in front of another person, even if just a little."
   - Kiyotaka Ayanokoji

6. "There are two things that define a person: their patience when they have nothing, and their attitude when they have everything."
   - Arisu Sakayanagi

7. "Those who remember there was someone named Kiyotaka Ayanokoji will never forget."
   - Manabu Horikita

8. "It doesn't matter what needs to be sacrificed. As long as I win in the end, that's all that matters."
   - Kiyotaka Ayanokoji

================================================================================
