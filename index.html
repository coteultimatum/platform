<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COTE: ULTIMATUM</title>
    <meta name="description" content="Welcome to Advanced Nurturing High School. Track student abilities, monitor class standings, and prepare for special exams.">

    <!-- Open Graph / Discord Embed -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="COTE: ULTIMATUM">
    <meta property="og:description" content="Welcome to Advanced Nurturing High School. Track student abilities, monitor class standings, and prepare for special exams.">
    <meta property="og:image" content="https://coteultimatum.github.io/platform/GRVN8MNQY-backdrop_wide.png">
    <meta property="og:url" content="https://coteultimatum.github.io/platform/">
    <meta name="theme-color" content="#050a12">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="COTE: ULTIMATUM">
    <meta name="twitter:description" content="Welcome to Advanced Nurturing High School. Track student abilities and special exams.">
    <meta name="twitter:image" content="https://coteultimatum.github.io/platform/GRVN8MNQY-backdrop_wide.png">

    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Boot Screen -->
    <div id="boot-screen" class="boot-screen">
        <div class="boot-content">
            <div class="boot-logo">
                <span class="boot-letter boot-c">C</span>
                <span class="boot-letter boot-o">O</span>
                <span class="boot-letter boot-t">T</span>
                <span class="boot-letter boot-e">E:</span>
            </div>
            <div class="boot-subtitle">ULTIMATUM</div>
            <div class="boot-loader">
                <div class="boot-loader-bar"></div>
            </div>
            <div class="boot-text">LOADING PLATFORM</div>
        </div>
    </div>

    <!-- Noise Texture Overlay -->
    <div class="noise-overlay"></div>

    <!-- Glitch Effects -->
    <div class="glitch-overlay" id="glitch-overlay"></div>

    <!-- Starfield Background -->
    <div class="starfield" id="starfield"></div>

    <!-- Lock Screen -->
    <div id="lock-screen" class="screen active">
        <div class="lock-content">
            <div class="lock-time" id="lock-time">12:00</div>
            <div class="lock-date" id="lock-date">Monday, January 11</div>
            <div class="lock-branding">
                <h1 class="lock-title">COTE:</h1>
                <h2 class="lock-subtitle">ULTIMATUM</h2>
            </div>
            <div class="enter-hint">
                <span>Click anywhere or press</span>
                <span class="enter-key">ENTER</span>
            </div>
        </div>
    </div>

    <!-- Home Screen -->
    <div id="home-screen" class="screen">
        <div class="home-header">
            <div class="header-left">
                <!-- Empty for balance -->
            </div>
            <div class="home-brand">
                <span class="home-brand-title">COTE:</span>
                <span class="home-brand-subtitle">ULTIMATUM</span>
            </div>
            <div class="header-right">
                <span class="home-time" id="home-time">12:00</span>
                <button class="lock-btn" id="lock-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                    </svg>
                </button>
            </div>
        </div>
        <div class="home-content">
            <div class="app-dock">
                <div class="app-icon" data-app="oaa">
                    <div class="app-icon-image">
                        <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="8" y="4" width="48" height="56" rx="4" stroke="currentColor" stroke-width="2"/>
                            <circle cx="32" cy="24" r="10" stroke="currentColor" stroke-width="2"/>
                            <path d="M16 52c0-8 7-14 16-14s16 6 16 14" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <span class="app-name">OAA</span>
                </div>
                <div class="app-icon" data-app="events">
                    <div class="app-icon-image">
                        <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="8" y="12" width="48" height="44" rx="4" stroke="currentColor" stroke-width="2"/>
                            <line x1="8" y1="24" x2="56" y2="24" stroke="currentColor" stroke-width="2"/>
                            <line x1="20" y1="8" x2="20" y2="16" stroke="currentColor" stroke-width="2"/>
                            <line x1="44" y1="8" x2="44" y2="16" stroke="currentColor" stroke-width="2"/>
                            <circle cx="24" cy="36" r="3" fill="currentColor"/>
                            <circle cx="40" cy="36" r="3" fill="currentColor"/>
                            <circle cx="24" cy="48" r="3" fill="currentColor"/>
                        </svg>
                    </div>
                    <span class="app-name">EXAMS</span>
                </div>
                <div class="app-icon" data-app="creator">
                    <div class="app-icon-image">
                        <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- DNA Helix with sparkle (character creation/genesis) -->
                            <path d="M20 8c8 4 16 4 24 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M20 18c8-4 16-4 24 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M20 28c8 4 16 4 24 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M20 38c8-4 16-4 24 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M20 48c8 4 16 4 24 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M20 58c8-4 16-4 24 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <!-- Vertical strands -->
                            <line x1="20" y1="8" x2="20" y2="58" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <line x1="44" y1="8" x2="44" y2="58" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <!-- Sparkle/creation effect -->
                            <circle cx="52" cy="12" r="2" fill="currentColor"/>
                            <line x1="52" y1="6" x2="52" y2="8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <line x1="52" y1="16" x2="52" y2="18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <line x1="46" y1="12" x2="48" y2="12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <line x1="56" y1="12" x2="58" y2="12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <span class="app-name">CREATOR</span>
                </div>
                <div class="app-icon admin-app-icon" data-app="admin">
                    <div class="app-icon-image">
                        <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Shield with checkmark -->
                            <path d="M32 6L10 16v16c0 14 9.4 27 22 30 12.6-3 22-16 22-30V16L32 6z" stroke="currentColor" stroke-width="2"/>
                            <polyline points="22,32 29,40 42,24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <span class="app-name">ADMIN</span>
                </div>
            </div>
            <div class="school-quote">
                <p class="quote-text">"Every outcome is the result of the choices you make."</p>
                <p class="quote-attribution">- ANHS Student Handbook</p>
            </div>
        </div>
        <div class="keyboard-hint">
            <div class="key-hint"><span class="key">ESC</span> LOCK</div>
            <div class="key-hint"><span class="key">1</span> OAA</div>
            <div class="key-hint"><span class="key">2</span> EXAMS</div>
            <div class="key-hint"><span class="key">3</span> CREATOR</div>
            <div class="key-hint"><span class="key">4</span> ADMIN</div>
        </div>
    </div>

    <!-- OAA App -->
    <div id="oaa-app" class="screen app-screen">
        <div class="app-header">
            <div class="nav-group">
                <button class="nav-btn" data-action="back" title="Back (ESC)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 18l-6-6 6-6"/>
                    </svg>
                </button>
                <h1 class="app-title">OAA</h1>
            </div>
            <div class="header-brand">
                <span class="brand-title">COTE:</span>
                <span class="brand-subtitle">ULTIMATUM</span>
            </div>
            <div class="header-right">
                <span class="header-time" id="oaa-time">12:00</span>
                <button class="nav-btn" data-action="home" title="Home">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- OAA Dashboard View -->
        <div id="oaa-dashboard" class="app-view active">
            <div class="dashboard-header">
                <div class="sort-container">
                    <span class="sort-label">Sort:</span>
                    <div class="sort-buttons">
                        <button class="sort-btn active" data-sort="default">Default</button>
                        <button class="sort-btn" data-sort="overall">Overall Grade</button>
                        <button class="sort-btn" data-sort="academic">Academic Ability</button>
                        <button class="sort-btn" data-sort="intelligence">Intelligence</button>
                        <button class="sort-btn" data-sort="decision">Decision Making</button>
                        <button class="sort-btn" data-sort="physical">Physical Ability</button>
                        <button class="sort-btn" data-sort="cooperativeness">Cooperativeness</button>
                    </div>
                </div>
                <button class="filter-btn" id="favorites-filter" title="Show Favorites (F)">
                    <span class="filter-icon">★</span>
                </button>
                <div class="search-container">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                    <input type="text" class="search-input" placeholder="Search students...">
                </div>
            </div>

            <div class="year-section">
                <div class="year-header">
                    <h2 class="year-title">1st Year Students</h2>
                    <span class="year-count" id="first-year-count">0 total</span>
                </div>
                <div class="class-grid" id="first-year-classes">
                    <!-- Classes populated by JS -->
                </div>
            </div>
        </div>

        <!-- OAA Class View -->
        <div id="oaa-class" class="app-view">
            <div class="class-view-top">
                <div class="sort-container class-sort">
                    <span class="sort-label">Sort:</span>
                    <div class="sort-buttons" id="class-sort-buttons">
                        <button class="sort-btn active" data-sort="default">Default</button>
                        <button class="sort-btn" data-sort="overall">Overall Grade</button>
                        <button class="sort-btn" data-sort="academic">Academic Ability</button>
                        <button class="sort-btn" data-sort="intelligence">Intelligence</button>
                        <button class="sort-btn" data-sort="decision">Decision Making</button>
                        <button class="sort-btn" data-sort="physical">Physical Ability</button>
                        <button class="sort-btn" data-sort="cooperativeness">Cooperativeness</button>
                    </div>
                </div>
            </div>
            <div class="class-view-header">
                <div class="class-view-badge" id="class-badge">A</div>
                <div class="class-view-info">
                    <h2 id="class-title">1st Year - Class A</h2>
                    <p class="student-count" id="student-count">0 Students</p>
                </div>
            </div>
            <div class="student-list" id="student-list">
                <!-- Students populated by JS -->
            </div>
        </div>

        <!-- OAA Profile View -->
        <div id="oaa-profile" class="app-view">
            <div class="profile-card">
                <div class="profile-header">
                    <div class="profile-header-info">
                        <h2 id="profile-name">Student Name</h2>
                        <p id="profile-class">1st Year - Class A</p>
                    </div>
                    <div class="profile-id">
                        <span class="id-label">ID</span>
                        <span class="id-value" id="profile-id">ABC-123</span>
                    </div>
                </div>
                <div class="profile-body">
                    <div class="profile-image-container">
                        <img class="profile-image" id="profile-image" src="" alt="Student" style="display: none;">
                        <div class="profile-image-placeholder" id="profile-placeholder">
                            <svg viewBox="0 0 64 64" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="32" cy="24" r="12"/>
                                <path d="M12 56c0-11 9-20 20-20s20 9 20 20"/>
                            </svg>
                        </div>
                        <div class="overall-grade-box">
                            <span class="overall-label">OVERALL GRADE</span>
                            <span class="overall-value" id="profile-overall">B-</span>
                        </div>
                    </div>
                    <div class="profile-stats">
                        <h3 class="stats-title">Evaluation</h3>
                        <div class="stat-list" id="stat-list">
                            <!-- Stats populated by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="keyboard-hint oaa-hints">
            <div class="key-hint"><span class="key">ESC</span> BACK</div>
            <div class="key-hint"><span class="key">/</span> SEARCH</div>
            <div class="key-hint"><span class="key">F</span> FAVORITES</div>
            <div class="key-hint"><span class="key">C</span> COMPARE</div>
        </div>
    </div>

    <!-- Events App -->
    <div id="events-app" class="screen app-screen">
        <div class="app-header">
            <div class="nav-group">
                <button class="nav-btn" data-action="back" title="Back (ESC)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 18l-6-6 6-6"/>
                    </svg>
                </button>
                <h1 class="app-title">EXAMS</h1>
            </div>
            <div class="header-brand">
                <span class="brand-title">COTE:</span>
                <span class="brand-subtitle">ULTIMATUM</span>
            </div>
            <div class="header-right">
                <span class="header-time" id="events-time">12:00</span>
                <button class="nav-btn" data-action="home" title="Home">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                </button>
            </div>
        </div>
        <div class="events-content">
            <!-- Current Event Section -->
            <div class="events-section">
                <div class="events-section-header">
                    <div class="section-indicator standby"></div>
                    <h2 class="events-section-title">CURRENT EXAM</h2>
                </div>
                <div class="current-event-card" id="current-event">
                    <div class="standby-state">
                        <div class="standby-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                        </div>
                        <div class="standby-text">
                            <h3>STANDBY</h3>
                            <p>No exam currently active</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Upcoming Section -->
            <div class="events-section">
                <div class="events-section-header">
                    <div class="section-indicator upcoming"></div>
                    <h2 class="events-section-title">UPCOMING</h2>
                </div>
                <div class="upcoming-list">
                    <div class="upcoming-empty">
                        <p>No scheduled exams</p>
                    </div>
                </div>
            </div>

            <!-- Exam Types Reference (Collapsible) -->
            <div class="events-section collapsible">
                <div class="events-section-header" data-toggle="exam-types">
                    <div class="section-indicator info"></div>
                    <h2 class="events-section-title">EXAM TYPES</h2>
                    <span class="collapse-icon">▼</span>
                </div>
                <div class="collapsible-content collapsed" id="exam-types">
                  <div class="exam-types-grid">
                    <div class="exam-type-card">
                        <div class="exam-type-icon survival">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                <circle cx="12" cy="10" r="3"/>
                            </svg>
                        </div>
                        <div class="exam-type-info">
                            <h4>Uninhabited Island Exam</h4>
                            <p>Wilderness survival test. Classes compete for resources and territory over multiple days.</p>
                            <div class="exam-type-tags">
                                <span class="exam-tag physical">Physical Ability</span>
                                <span class="exam-tag cooperativeness">Cooperativeness</span>
                            </div>
                        </div>
                    </div>
                    <div class="exam-type-card">
                        <div class="exam-type-icon written">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                                <line x1="16" y1="13" x2="8" y2="13"/>
                                <line x1="16" y1="17" x2="8" y2="17"/>
                            </svg>
                        </div>
                        <div class="exam-type-info">
                            <h4>Paper Shuffle</h4>
                            <p>Academic showdown between classes. Students create and exchange test problems.</p>
                            <div class="exam-type-tags">
                                <span class="exam-tag academic">Academic Ability</span>
                                <span class="exam-tag intelligence">Intelligence</span>
                            </div>
                        </div>
                    </div>
                    <div class="exam-type-card">
                        <div class="exam-type-icon zodiac">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 2a10 10 0 0 1 0 20"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                        </div>
                        <div class="exam-type-info">
                            <h4>Zodiac Exam</h4>
                            <p>Deduction game on the cruise ship. Identify VIPs while protecting your own.</p>
                            <div class="exam-type-tags">
                                <span class="exam-tag intelligence">Intelligence</span>
                                <span class="exam-tag decision">Decision Making</span>
                            </div>
                        </div>
                    </div>
                    <div class="exam-type-card">
                        <div class="exam-type-icon poll">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                <circle cx="9" cy="7" r="4"/>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                            </svg>
                        </div>
                        <div class="exam-type-info">
                            <h4>Class Vote</h4>
                            <p>Vote for praise and criticism within your class. Lowest rated faces expulsion risk.</p>
                            <div class="exam-type-tags">
                                <span class="exam-tag cooperativeness">Cooperativeness</span>
                                <span class="exam-tag danger">High Stakes</span>
                            </div>
                        </div>
                    </div>
                    <div class="exam-type-card">
                        <div class="exam-type-icon sports">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 2a10 10 0 0 0 0 20 10 10 0 0 0 0-20"/>
                                <path d="M2 12h20"/>
                                <path d="M12 2c2.5 2.5 4 6 4 10s-1.5 7.5-4 10c-2.5-2.5-4-6-4-10s1.5-7.5 4-10"/>
                            </svg>
                        </div>
                        <div class="exam-type-info">
                            <h4>Sports Festival</h4>
                            <p>Athletic competition. Red and White teams with mixed class assignments.</p>
                            <div class="exam-type-tags">
                                <span class="exam-tag physical">Physical Ability</span>
                                <span class="exam-tag cooperativeness">Cooperativeness</span>
                            </div>
                        </div>
                    </div>
                    <div class="exam-type-card">
                        <div class="exam-type-icon written">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                                <line x1="16" y1="13" x2="8" y2="13"/>
                                <line x1="16" y1="17" x2="8" y2="17"/>
                            </svg>
                        </div>
                        <div class="exam-type-info">
                            <h4>Final Exam</h4>
                            <p>End-of-term written examination. Class average determines pass or fail.</p>
                            <div class="exam-type-tags">
                                <span class="exam-tag academic">Academic Ability</span>
                                <span class="exam-tag danger">High Stakes</span>
                            </div>
                        </div>
                    </div>
                  </div>
                </div>
            </div>

            <!-- Past Events Section -->
            <div class="events-section">
                <div class="events-section-header">
                    <div class="section-indicator past"></div>
                    <h2 class="events-section-title">HISTORY</h2>
                </div>
                <div class="past-events-list">
                    <div class="past-event-item">
                        <div class="past-event-date">—</div>
                        <div class="past-event-info">
                            <span class="past-event-name">No past exams recorded</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="keyboard-hint events-hints">
            <div class="key-hint"><span class="key">ESC</span> BACK</div>
        </div>
    </div>

    <!-- Admin App -->
    <div id="admin-app" class="screen app-screen">
        <div class="app-header">
            <div class="nav-group">
                <button class="nav-btn" data-action="back" title="Back (ESC)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 18l-6-6 6-6"/>
                    </svg>
                </button>
                <h1 class="app-title">ADMIN</h1>
            </div>
            <div class="header-brand">
                <span class="brand-title">COTE:</span>
                <span class="brand-subtitle">ULTIMATUM</span>
            </div>
            <div class="header-right">
                <span class="header-time" id="admin-time">12:00</span>
                <button class="nav-btn" data-action="home" title="Home">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Login View -->
        <div class="admin-content" id="admin-login-view">
            <div class="admin-login-container">
                <div class="admin-login-icon">
                    <svg viewBox="0 0 64 64" fill="none" stroke="currentColor" stroke-width="2.5">
                        <!-- Padlock with U-shaped shackle -->
                        <rect x="14" y="28" width="36" height="28" rx="4"/>
                        <path d="M22 28V20a10 10 0 0 1 20 0v8" stroke-linecap="round"/>
                        <circle cx="32" cy="42" r="4" fill="currentColor" stroke="none"/>
                        <line x1="32" y1="46" x2="32" y2="50" stroke-width="3" stroke-linecap="round"/>
                    </svg>
                </div>
                <h2 class="admin-login-title">Authentication</h2>
                <p class="admin-login-subtitle">Authorized personnel only</p>
                <div class="admin-login-form">
                    <div class="admin-input-group">
                        <label for="admin-username">Username</label>
                        <input type="text" id="admin-username" placeholder="Enter username" autocomplete="off">
                    </div>
                    <div class="admin-input-group">
                        <label for="admin-password">Password</label>
                        <input type="password" id="admin-password" placeholder="Enter password">
                    </div>
                    <div class="admin-login-error" id="admin-login-error"></div>
                    <button class="admin-login-btn" id="admin-login-btn">Log In</button>
                </div>
            </div>
        </div>

        <!-- Panel View (after login) -->
        <div class="admin-content admin-panel-view" id="admin-panel-view" style="display: none;">
            <div class="admin-user-bar">
                <div class="admin-user-info">
                    <span class="admin-user-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                    </span>
                    <span class="admin-user-name" id="admin-user-name">Admin</span>
                </div>
                <button class="admin-logout-btn" id="admin-logout-btn">Sign Out</button>
            </div>

            <div class="admin-section">
                <h3 class="admin-section-title">Class Points</h3>
                <div class="admin-years-container">
                    <!-- Year 1 -->
                    <div class="admin-year-section">
                        <div class="admin-year-label">1st Year</div>
                        <div class="admin-class-grid">
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-a">A</span>
                                <input type="text" id="admin-points-1-A" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-b">B</span>
                                <input type="text" id="admin-points-1-B" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-c">C</span>
                                <input type="text" id="admin-points-1-C" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-d">D</span>
                                <input type="text" id="admin-points-1-D" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                        </div>
                    </div>
                    <!-- Year 2 -->
                    <div class="admin-year-section">
                        <div class="admin-year-label">2nd Year</div>
                        <div class="admin-class-grid">
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-a">A</span>
                                <input type="text" id="admin-points-2-A" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-b">B</span>
                                <input type="text" id="admin-points-2-B" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-c">C</span>
                                <input type="text" id="admin-points-2-C" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-d">D</span>
                                <input type="text" id="admin-points-2-D" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                        </div>
                    </div>
                    <!-- Year 3 -->
                    <div class="admin-year-section">
                        <div class="admin-year-label">3rd Year</div>
                        <div class="admin-class-grid">
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-a">A</span>
                                <input type="text" id="admin-points-3-A" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-b">B</span>
                                <input type="text" id="admin-points-3-B" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-c">C</span>
                                <input type="text" id="admin-points-3-C" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                            <div class="admin-class-input">
                                <span class="admin-class-badge class-d">D</span>
                                <input type="text" id="admin-points-3-D" inputmode="numeric" pattern="[0-9,]*" value="1,000">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="admin-actions">
                    <button class="admin-save-btn" id="admin-save-btn">Save Changes</button>
                    <button class="admin-reset-btn" id="admin-reset-btn">Reset</button>
                </div>
                <div class="admin-status" id="admin-status"></div>
            </div>

            <!-- Change Log -->
            <div class="admin-section">
                <h3 class="admin-section-title">Recent Changes</h3>
                <div class="admin-changelog" id="admin-changelog">
                    <div class="admin-changelog-empty">No changes recorded</div>
                </div>
            </div>
        </div>

        <!-- Save Confirmation Modal -->
        <div class="admin-modal-overlay" id="admin-confirm-modal" style="display: none;">
            <div class="admin-modal">
                <div class="admin-modal-header">Confirm Changes</div>
                <div class="admin-modal-body">
                    <p>Save the following changes?</p>
                    <div class="admin-modal-changes" id="admin-modal-changes"></div>
                </div>
                <div class="admin-modal-actions">
                    <button class="admin-modal-cancel" id="admin-modal-cancel">Cancel</button>
                    <button class="admin-modal-confirm" id="admin-modal-confirm">Save</button>
                </div>
            </div>
        </div>

        <div class="keyboard-hint admin-hints">
            <div class="key-hint"><span class="key">ESC</span> BACK</div>
        </div>
    </div>

    <!-- Creator App -->
    <div id="creator-app" class="screen app-screen">
        <div class="app-header">
            <div class="nav-group">
                <h1 class="app-title">CREATOR</h1>
            </div>
            <div class="header-brand">
                <span class="brand-title">COTE:</span>
                <span class="brand-subtitle">ULTIMATUM</span>
            </div>
            <div class="header-right">
                <span class="header-time" id="creator-time">12:00</span>
                <button class="nav-btn" data-action="home" title="Home">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="creator-content">
            <!-- Progress Indicator -->
            <div class="creator-progress">
                <div class="progress-step active" data-step="info">
                    <div class="step-number"><span>1</span></div>
                    <span class="step-label">Identity</span>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="bio">
                    <div class="step-number"><span>2</span></div>
                    <span class="step-label">Background</span>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="abilities">
                    <div class="step-number"><span>3</span></div>
                    <span class="step-label">Evaluation</span>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="export">
                    <div class="step-number"><span>4</span></div>
                    <span class="step-label">Export</span>
                </div>
            </div>

            <!-- Step 1: Identity -->
            <div class="creator-step active" id="creator-step-info">
                <div class="creator-card">
                    <div class="creator-card-header">
                        <h2>Identity</h2>
                        <span class="creator-card-badge">REQUIRED</span>
                    </div>

                    <div class="creator-identity-layout">
                        <div class="creator-avatar-section">
                            <div class="creator-avatar-preview" id="creator-avatar-preview">
                                <svg viewBox="0 0 64 64" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <circle cx="32" cy="24" r="12"/>
                                    <path d="M12 56c0-11 9-20 20-20s20 9 20 20"/>
                                </svg>
                            </div>
                            <div class="creator-input-group">
                                <label for="creator-image">Image URL</label>
                                <input type="url" id="creator-image" placeholder="https://...">
                            </div>
                        </div>

                        <div class="creator-details-section">
                            <div class="creator-input-group">
                                <label for="creator-name">Full Name</label>
                                <input type="text" id="creator-name" placeholder="Enter character name" maxlength="50">
                            </div>

                            <div class="creator-input-group">
                                <label>Year</label>
                                <div class="creator-select-group">
                                    <button class="creator-select-btn active" data-year="1">1st Year</button>
                                    <button class="creator-select-btn" data-year="2">2nd Year</button>
                                    <button class="creator-select-btn" data-year="3">3rd Year</button>
                                </div>
                            </div>

                            <div class="creator-input-group">
                                <label>Class Preference</label>
                                <div class="creator-select-group class-select">
                                    <button class="creator-select-btn class-a-btn" data-class="A">
                                        <span class="class-letter">A</span>
                                        <span class="class-desc">Elite</span>
                                    </button>
                                    <button class="creator-select-btn class-b-btn" data-class="B">
                                        <span class="class-letter">B</span>
                                        <span class="class-desc">Strong</span>
                                    </button>
                                    <button class="creator-select-btn class-c-btn" data-class="C">
                                        <span class="class-letter">C</span>
                                        <span class="class-desc">Average</span>
                                    </button>
                                    <button class="creator-select-btn class-d-btn" data-class="D">
                                        <span class="class-letter">D</span>
                                        <span class="class-desc">Defective</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="creator-nav-buttons centered">
                    <button class="creator-btn primary" data-next="bio">
                        Continue
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Step 2: Background -->
            <div class="creator-step" id="creator-step-bio">
                <div class="creator-card">
                    <div class="creator-card-header">
                        <h2>Background</h2>
                        <span class="creator-card-badge">REQUIRED</span>
                    </div>

                    <div class="creator-form">
                        <div class="creator-input-group">
                            <label for="creator-bio">Biography</label>
                            <textarea id="creator-bio" placeholder="Where did they come from? What drives them? Why did they enroll at ANHS?" maxlength="500"></textarea>
                            <p class="input-hint"><span id="bio-char-count">0</span>/500</p>
                        </div>

                        <div class="creator-input-group">
                            <label for="creator-personality">Personality</label>
                            <textarea id="creator-personality" placeholder="Strengths, weaknesses, quirks, how they interact with others..." maxlength="300"></textarea>
                            <p class="input-hint"><span id="personality-char-count">0</span>/300</p>
                        </div>
                    </div>
                </div>

                <div class="creator-nav-buttons centered">
                    <button class="creator-btn primary" data-next="abilities">
                        Continue
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Step 3: Evaluation -->
            <div class="creator-step" id="creator-step-abilities">
                <!-- Trait Discovery Section - Prominent Quiz CTA -->
                <div class="trait-discovery-section">
                    <div class="trait-discovery-header">
                        <div class="trait-discovery-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                            </svg>
                        </div>
                        <div class="trait-discovery-text">
                            <h3>Discover Your Traits</h3>
                            <p>Optional quizzes that reveal character-defining traits</p>
                        </div>
                        <div class="trait-discovery-progress">
                            <span class="trait-progress-count" id="traits-completed">0</span>
                            <span class="trait-progress-total">/5</span>
                        </div>
                    </div>
                    <div class="trait-quiz-grid">
                        <button class="trait-quiz-card" data-category="academic">
                            <div class="trait-quiz-card-icon stat-academic-bg">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 14l9-5-9-5-9 5 9 5z"/>
                                    <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
                                </svg>
                            </div>
                        </button>
                        <button class="trait-quiz-card" data-category="intelligence">
                            <div class="trait-quiz-card-icon stat-intelligence-bg">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                                </svg>
                            </div>
                        </button>
                        <button class="trait-quiz-card" data-category="decision">
                            <div class="trait-quiz-card-icon stat-decision-bg">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                                </svg>
                            </div>
                        </button>
                        <button class="trait-quiz-card" data-category="physical">
                            <div class="trait-quiz-card-icon stat-physical-bg">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                </svg>
                            </div>
                        </button>
                        <button class="trait-quiz-card" data-category="cooperativeness">
                            <div class="trait-quiz-card-icon stat-cooperativeness-bg">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                                </svg>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Stats Section -->
                <div class="eval-layout">
                    <!-- Left: Grade Card -->
                    <div class="eval-grade-card">
                        <div class="eval-grade-circle">
                            <span class="eval-grade-value" id="creator-overall-grade">C</span>
                        </div>
                        <div class="eval-grade-label">Overall Grade</div>
                        <div class="eval-grade-hint">Based on stat average</div>
                    </div>

                    <!-- Right: Stats -->
                    <div class="eval-stats-card">
                        <h3 class="eval-stats-title">Evaluation</h3>

                        <div class="eval-stat-list">
                            <!-- Academic -->
                            <div class="eval-stat-row" data-category="academic">
                                <div class="eval-stat-header">
                                    <span class="eval-stat-name">Academic Ability</span>
                                    <span class="eval-stat-value" id="creator-stat-academic-display">50</span>
                                </div>
                                <div class="eval-stat-bar">
                                    <div class="eval-stat-fill stat-academic" id="creator-stat-academic-bar" style="width: 50%"></div>
                                </div>
                                <div class="eval-stat-controls">
                                    <input type="range" class="eval-slider" id="creator-stat-academic" min="0" max="100" value="50">
                                    <div class="eval-trait" id="trait-result-academic"></div>
                                </div>
                            </div>

                            <!-- Intelligence -->
                            <div class="eval-stat-row" data-category="intelligence">
                                <div class="eval-stat-header">
                                    <span class="eval-stat-name">Intelligence</span>
                                    <span class="eval-stat-value" id="creator-stat-intelligence-display">50</span>
                                </div>
                                <div class="eval-stat-bar">
                                    <div class="eval-stat-fill stat-intelligence" id="creator-stat-intelligence-bar" style="width: 50%"></div>
                                </div>
                                <div class="eval-stat-controls">
                                    <input type="range" class="eval-slider" id="creator-stat-intelligence" min="0" max="100" value="50">
                                    <div class="eval-trait" id="trait-result-intelligence"></div>
                                </div>
                            </div>

                            <!-- Decision Making -->
                            <div class="eval-stat-row" data-category="decision">
                                <div class="eval-stat-header">
                                    <span class="eval-stat-name">Decision Making</span>
                                    <span class="eval-stat-value" id="creator-stat-decision-display">50</span>
                                </div>
                                <div class="eval-stat-bar">
                                    <div class="eval-stat-fill stat-decision" id="creator-stat-decision-bar" style="width: 50%"></div>
                                </div>
                                <div class="eval-stat-controls">
                                    <input type="range" class="eval-slider" id="creator-stat-decision" min="0" max="100" value="50">
                                    <div class="eval-trait" id="trait-result-decision"></div>
                                </div>
                            </div>

                            <!-- Physical -->
                            <div class="eval-stat-row" data-category="physical">
                                <div class="eval-stat-header">
                                    <span class="eval-stat-name">Physical Ability</span>
                                    <span class="eval-stat-value" id="creator-stat-physical-display">50</span>
                                </div>
                                <div class="eval-stat-bar">
                                    <div class="eval-stat-fill stat-physical" id="creator-stat-physical-bar" style="width: 50%"></div>
                                </div>
                                <div class="eval-stat-controls">
                                    <input type="range" class="eval-slider" id="creator-stat-physical" min="0" max="100" value="50">
                                    <div class="eval-trait" id="trait-result-physical"></div>
                                </div>
                            </div>

                            <!-- Cooperativeness -->
                            <div class="eval-stat-row" data-category="cooperativeness">
                                <div class="eval-stat-header">
                                    <span class="eval-stat-name">Cooperativeness</span>
                                    <span class="eval-stat-value" id="creator-stat-cooperativeness-display">50</span>
                                </div>
                                <div class="eval-stat-bar">
                                    <div class="eval-stat-fill stat-cooperativeness" id="creator-stat-cooperativeness-bar" style="width: 50%"></div>
                                </div>
                                <div class="eval-stat-controls">
                                    <input type="range" class="eval-slider" id="creator-stat-cooperativeness" min="0" max="100" value="50">
                                    <div class="eval-trait" id="trait-result-cooperativeness"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="creator-nav-buttons centered">
                    <button class="creator-btn primary" data-next="export">
                        Continue
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Step 4: Export -->
            <div class="creator-step" id="creator-step-export">
                <div class="creator-preview-card" id="creator-preview">
                    <!-- Preview populated by JS - styled like OAA profile -->
                </div>

                <div class="creator-export-actions">
                    <button class="creator-btn primary export-btn" id="export-pdf-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="12" y1="18" x2="12" y2="12"/>
                            <polyline points="9 15 12 18 15 15"/>
                        </svg>
                        Download PDF
                    </button>
                    <button class="creator-btn secondary" id="export-reset-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                            <path d="M3 3v5h5"/>
                        </svg>
                        Start Over
                    </button>
                </div>

            </div>
        </div>

        <!-- Trait Quiz Modal -->
        <div class="trait-quiz-modal" id="trait-quiz-modal">
            <div class="trait-quiz-content">
                <div class="trait-quiz-header">
                    <div class="trait-quiz-category-icon" id="trait-quiz-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 14l9-5-9-5-9 5 9 5z"/>
                        </svg>
                    </div>
                    <div class="trait-quiz-header-text">
                        <span class="trait-quiz-category-label">Evaluating</span>
                        <h3 id="trait-quiz-title">Academic Ability</h3>
                    </div>
                    <button class="trait-quiz-close" id="trait-quiz-close">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
                <div class="trait-quiz-body">
                    <div class="trait-quiz-progress">
                        <div class="trait-quiz-progress-steps">
                            <span class="progress-current" id="trait-quiz-current">1</span>
                            <span class="progress-divider">/</span>
                            <span class="progress-total" id="trait-quiz-total">3</span>
                        </div>
                        <div class="trait-quiz-progress-bar">
                            <div class="trait-quiz-progress-fill" id="trait-quiz-progress-fill"></div>
                        </div>
                    </div>
                    <div class="trait-quiz-question-card">
                        <div class="trait-quiz-question" id="trait-quiz-question">
                            <!-- Question populated by JS -->
                        </div>
                    </div>
                    <div class="trait-quiz-options" id="trait-quiz-options">
                        <!-- Options populated by JS -->
                    </div>
                </div>
                <div class="trait-quiz-footer">
                    <div class="trait-quiz-hint">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        Choose the answer that best describes your character
                    </div>
                </div>
            </div>
        </div>

        <div class="keyboard-hint creator-hints">
            <div class="key-hint"><span class="key">ESC</span> BACK</div>
        </div>
    </div>

    <!-- Firebase SDK (modular) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

    <!-- App Scripts -->
    <script src="students.js"></script>
    <script src="database.js"></script>
    <script src="script.js"></script>
</body>
</html>
